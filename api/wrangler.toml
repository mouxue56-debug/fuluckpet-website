# 福楽キャッテリー — Cloudflare Workers 設定
# ドキュメント: https://developers.cloudflare.com/workers/wrangler/configuration/

name = "fuluck-api"
main = "worker.js"
compatibility_date = "2024-09-23"

# 環境変数 (本番では Workers Settings > Variables で設定)
[vars]
CORS_ORIGIN = "*"
# 以下のシークレットは `wrangler secret put` で設定してください（コードに書かないこと）:
#   ADMIN_PASSWORD            — 管理画面パスワード
#   GOOGLE_SA_KEY             — Google Service Account JSON（全内容をペースト）
#   GOOGLE_DRIVE_ROOT_FOLDER_ID — Google Drive ルートフォルダ ID

# R2 バケット (画像ストレージ)
[[r2_buckets]]
binding = "BUCKET"
bucket_name = "fuluck-images"
# preview_bucket_name = "fuluck-images-dev"  # ローカル開発用

# KV Namespace (データストア)
[[kv_namespaces]]
binding = "DATA"
id = "d319e99874ef40d5b5836587edfee243"
# preview_id = "YOUR_KV_PREVIEW_ID_HERE"  # ローカル開発用

# カスタムドメイン (オプション)
# routes = [
#   { pattern = "api.fuluckpet.com/*", zone_name = "fuluckpet.com" }
# ]

# デプロイ手順:
# 1. npm install -g wrangler
# 2. wrangler login
# 3. wrangler r2 bucket create fuluck-images
# 4. wrangler kv namespace create DATA
#    → 返された id を上の id = "..." に貼り付け
# 5. wrangler deploy
# 6. Workers Settings > Variables で ADMIN_PASSWORD を設定
