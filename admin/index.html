<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç®¡ç†ç”»é¢ | ç¦æ¥½ã‚­ãƒ£ãƒƒãƒ†ãƒªãƒ¼</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --mint: #7DD3C0;
      --mint-dark: #5BC4A8;
      --mint-light: #F0FFFA;
      --bg: #F8FAFB;
      --white: #FFFFFF;
      --text: #2D3748;
      --text-light: #718096;
      --border: #E2E8F0;
      --danger: #FC8181;
      --danger-dark: #E53E3E;
      --success: #68D391;
      --warning: #F6E05E;
      --sidebar-w: 250px;
      --header-h: 64px;
      --radius: 12px;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:'Noto Sans JP',sans-serif; background:var(--bg); color:var(--text); font-size:14px; line-height:1.7; }

    /* === LOGIN === */
    .login-screen { min-height:100vh; display:flex; align-items:center; justify-content:center; background:linear-gradient(135deg,#F0FFFA,#FFFCF0,#FFF8FB); }
    .login-card { background:var(--white); border-radius:20px; padding:48px 40px; box-shadow:0 8px 40px rgba(0,0,0,0.08); width:100%; max-width:400px; text-align:center; }
    .login-logo { font-size:48px; margin-bottom:16px; }
    .login-title { font-size:20px; font-weight:700; margin-bottom:8px; }
    .login-sub { font-size:13px; color:var(--text-light); margin-bottom:32px; }
    .login-input { width:100%; padding:14px 20px; border:1.5px solid var(--border); border-radius:10px; font-size:15px; font-family:inherit; margin-bottom:16px; outline:none; transition:border-color .2s; }
    .login-input:focus { border-color:var(--mint); }
    .login-btn { width:100%; padding:14px; background:linear-gradient(135deg,var(--mint),var(--mint-dark)); color:white; border:none; border-radius:10px; font-size:15px; font-weight:700; font-family:inherit; cursor:pointer; transition:transform .2s; }
    .login-btn:hover { transform:translateY(-2px); box-shadow:0 6px 20px rgba(125,211,192,0.3); }
    .login-error { color:var(--danger-dark); font-size:13px; margin-top:12px; display:none; }

    /* === LAYOUT === */
    .admin-layout { display:none; min-height:100vh; }
    .admin-layout.active { display:flex; }

    /* === SIDEBAR === */
    .sidebar { width:var(--sidebar-w); background:var(--white); border-right:1px solid var(--border); height:100vh; position:fixed; left:0; top:0; display:flex; flex-direction:column; z-index:100; overflow-y:auto; }
    .sidebar-logo { padding:20px 24px; border-bottom:1px solid var(--border); display:flex; align-items:center; gap:10px; font-weight:700; font-size:15px; flex-shrink:0; }
    .sidebar-logo span { font-size:24px; }
    .sidebar-nav { flex:1; padding:16px 12px; overflow-y:auto; }
    .nav-section { margin-bottom:24px; }
    .nav-section-title { font-size:11px; font-weight:700; color:var(--text-light); text-transform:uppercase; letter-spacing:1px; padding:0 12px; margin-bottom:8px; }
    .nav-item { display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:8px; cursor:pointer; transition:all .2s; font-size:14px; font-weight:500; color:var(--text-light); }
    .nav-item:hover { background:var(--mint-light); color:var(--text); }
    .nav-item.active { background:linear-gradient(135deg,var(--mint),var(--mint-dark)); color:white; }
    .nav-item .icon { font-size:18px; width:24px; text-align:center; }
    .sidebar-footer { padding:16px 24px; border-top:1px solid var(--border); flex-shrink:0; }
    .logout-btn { background:none; border:none; color:var(--danger-dark); cursor:pointer; font-family:inherit; font-size:13px; font-weight:500; }
    .logout-btn:hover { text-decoration:underline; }

    /* === MAIN === */
    .main-content { margin-left:var(--sidebar-w); flex:1; min-height:100vh; }
    .top-bar { height:var(--header-h); background:var(--white); border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; padding:0 32px; position:sticky; top:0; z-index:50; }
    .page-title { font-size:18px; font-weight:700; }
    .top-actions { display:flex; gap:12px; align-items:center; }
    .top-btn { padding:8px 20px; border-radius:8px; border:none; font-family:inherit; font-size:13px; font-weight:600; cursor:pointer; transition:all .2s; text-decoration:none; display:inline-flex; align-items:center; gap:6px; }
    .btn-primary { background:linear-gradient(135deg,var(--mint),var(--mint-dark)); color:white; }
    .btn-primary:hover { transform:translateY(-1px); box-shadow:0 4px 12px rgba(125,211,192,0.3); }
    .btn-secondary { background:var(--bg); color:var(--text); border:1px solid var(--border); }
    .btn-secondary:hover { background:var(--white); }
    .btn-danger { background:var(--danger-dark); color:white; }
    .btn-danger:hover { opacity:.9; }
    .content-area { padding:32px; }

    /* === STAT CARDS === */
    .stat-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:20px; margin-bottom:32px; }
    .stat-card { background:var(--white); border-radius:var(--radius); padding:24px; border:1px solid var(--border); }
    .stat-icon { font-size:28px; margin-bottom:12px; }
    .stat-value { font-size:28px; font-weight:700; }
    .stat-label { font-size:12px; color:var(--text-light); margin-top:4px; }

    /* === DATA TABLE === */
    .data-table { background:var(--white); border-radius:var(--radius); border:1px solid var(--border); overflow:hidden; margin-bottom:24px; }
    .table-header { display:flex; justify-content:space-between; align-items:center; padding:20px 24px; border-bottom:1px solid var(--border); flex-wrap:wrap; gap:12px; }
    .table-title { font-size:16px; font-weight:700; }
    .table-actions { display:flex; gap:8px; flex-wrap:wrap; }
    .table-scroll { overflow-x:auto; }
    table { width:100%; border-collapse:collapse; min-width:700px; }
    th { text-align:left; padding:12px 16px; font-size:12px; font-weight:600; color:var(--text-light); text-transform:uppercase; letter-spacing:.5px; border-bottom:1px solid var(--border); background:var(--bg); white-space:nowrap; }
    td { padding:12px 16px; border-bottom:1px solid var(--border); font-size:13px; }
    tr:last-child td { border-bottom:none; }
    tr:hover td { background:#F9FAFB; }
    .thumb-cell { width:60px; }
    .thumb-img { width:50px; height:50px; border-radius:8px; object-fit:cover; cursor:pointer; border:1px solid var(--border); }
    .thumb-placeholder { width:50px; height:50px; border-radius:8px; background:var(--bg); border:1px solid var(--border); display:flex; align-items:center; justify-content:center; font-size:20px; }
    .status-badge { display:inline-block; padding:3px 12px; border-radius:100px; font-size:12px; font-weight:600; white-space:nowrap; }
    .badge-available { background:#C6F6D5; color:#22543D; }
    .badge-reserved { background:#FEFCBF; color:#744210; }
    .badge-sold { background:#FED7E2; color:#702459; }
    .action-btns { display:flex; gap:6px; flex-wrap:wrap; }
    .action-btn { padding:5px 10px; border-radius:6px; border:1px solid var(--border); background:var(--white); font-size:11px; cursor:pointer; font-family:inherit; white-space:nowrap; transition:all .15s; }
    .action-btn:hover { background:var(--bg); }
    .action-btn.photo { color:#3182CE; border-color:#3182CE; }
    .action-btn.edit { color:var(--mint-dark); border-color:var(--mint-dark); }
    .action-btn.delete { color:var(--danger-dark); border-color:var(--danger-dark); }
    .action-btn.delete:hover { background:#FFF5F5; }
    .breeder-link { color:#3182CE; text-decoration:none; font-weight:500; }
    .breeder-link:hover { text-decoration:underline; }

    /* === MODAL === */
    .modal-overlay { position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.4); backdrop-filter:blur(4px); z-index:200; display:none; align-items:center; justify-content:center; padding:24px; }
    .modal-overlay.active { display:flex; }
    .modal { background:var(--white); border-radius:16px; max-width:720px; width:100%; max-height:90vh; overflow-y:auto; box-shadow:0 24px 60px rgba(0,0,0,0.15); }
    .modal.modal-lg { max-width:900px; }
    .modal-header { display:flex; justify-content:space-between; align-items:center; padding:24px 28px; border-bottom:1px solid var(--border); }
    .modal-header h2 { font-size:18px; font-weight:700; }
    .modal-close { width:32px; height:32px; border-radius:50%; border:none; background:var(--bg); cursor:pointer; font-size:18px; display:flex; align-items:center; justify-content:center; }
    .modal-body { padding:28px; }
    .form-group { margin-bottom:20px; }
    .form-label { display:block; font-size:13px; font-weight:600; margin-bottom:6px; }
    .form-input,.form-select,.form-textarea { width:100%; padding:10px 14px; border:1.5px solid var(--border); border-radius:8px; font-size:14px; font-family:inherit; outline:none; transition:border-color .2s; background:var(--white); }
    .form-input:focus,.form-select:focus,.form-textarea:focus { border-color:var(--mint); }
    .form-textarea { min-height:80px; resize:vertical; }
    .form-row { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
    .form-row-3 { display:grid; grid-template-columns:1fr 1fr 1fr; gap:16px; }
    .form-hint { font-size:11px; color:var(--text-light); margin-top:4px; }
    .modal-footer { padding:20px 28px; border-top:1px solid var(--border); display:flex; justify-content:flex-end; gap:12px; }
    .btn-cancel { padding:10px 24px; border-radius:8px; border:1px solid var(--border); background:var(--white); font-family:inherit; font-size:14px; cursor:pointer; }
    .btn-save { padding:10px 24px; border-radius:8px; border:none; background:linear-gradient(135deg,var(--mint),var(--mint-dark)); color:white; font-family:inherit; font-size:14px; font-weight:600; cursor:pointer; }
    .btn-save:hover { transform:translateY(-1px); }

    /* === PHOTO UPLOAD === */
    .photo-upload-area { border:2px dashed var(--border); border-radius:var(--radius); padding:24px; text-align:center; cursor:pointer; background:var(--bg); transition:all .2s; }
    .photo-upload-area:hover { border-color:var(--mint); background:var(--mint-light); }
    .photo-upload-area .icon { font-size:32px; margin-bottom:8px; }
    .photo-upload-area p { font-size:13px; color:var(--text-light); }
    .photo-preview-container { margin-top:12px; }
    .photo-preview-img { max-width:300px; max-height:200px; border-radius:8px; border:1px solid var(--border); }

    /* === SETTINGS CARD === */
    .settings-card { background:var(--white); border-radius:var(--radius); border:1px solid var(--border); padding:28px; margin-bottom:20px; }
    .settings-card h3 { font-size:16px; font-weight:700; margin-bottom:16px; }

    /* === CODE BLOCK === */
    .code-block { background:#1a202c; color:#e2e8f0; padding:20px; border-radius:8px; font-family:'Courier New',monospace; font-size:12px; line-height:1.6; overflow-x:auto; max-height:400px; overflow-y:auto; white-space:pre-wrap; word-break:break-all; }
    .code-block-wrapper { position:relative; }
    .copy-btn { position:absolute; top:8px; right:8px; padding:4px 12px; border-radius:4px; border:1px solid #4a5568; background:#2d3748; color:#e2e8f0; cursor:pointer; font-size:11px; }
    .copy-btn:hover { background:#4a5568; }

    /* === TOAST === */
    .toast { position:fixed; bottom:24px; right:24px; padding:14px 24px; background:var(--text); color:white; border-radius:10px; font-size:14px; font-weight:500; box-shadow:0 8px 24px rgba(0,0,0,0.15); z-index:300; transform:translateY(100px); opacity:0; transition:all .3s; }
    .toast.show { transform:translateY(0); opacity:1; }
    .toast.success { background:#38A169; }
    .toast.error { background:#E53E3E; }

    /* === PAGES === */
    .panel-page { display:none; }
    .panel-page.active { display:block; }

    /* === GUIDE === */
    .guide-step { background:var(--white); border-radius:var(--radius); border:1px solid var(--border); padding:24px; margin-bottom:16px; }
    .guide-step h4 { font-size:15px; font-weight:700; margin-bottom:8px; display:flex; align-items:center; gap:8px; }
    .guide-step p { font-size:13px; color:var(--text-light); line-height:1.8; }
    .guide-step .step-number { display:inline-flex; align-items:center; justify-content:center; width:28px; height:28px; border-radius:50%; background:var(--mint); color:white; font-size:13px; font-weight:700; flex-shrink:0; }

    /* === RESPONSIVE === */
    @media (max-width:1024px) {
      .stat-grid { grid-template-columns:repeat(2,1fr); }
    }
    @media (max-width:768px) {
      .sidebar { display:none; }
      .main-content { margin-left:0; }
      .stat-grid { grid-template-columns:repeat(2,1fr); }
      .form-row,.form-row-3 { grid-template-columns:1fr; }
      .content-area { padding:16px; }
      .top-bar { padding:0 16px; }
    }
  </style>
</head>
<body>

  <!-- ====== LOGIN ====== -->
  <div id="loginScreen" class="login-screen">
    <div class="login-card">
      <div class="login-logo">ğŸ¾</div>
      <h1 class="login-title">ç¦æ¥½ã‚­ãƒ£ãƒƒãƒ†ãƒªãƒ¼ ç®¡ç†ç”»é¢</h1>
      <p class="login-sub">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„</p>
      <input type="password" id="loginPassword" class="login-input" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" autocomplete="current-password">
      <button id="loginBtn" class="login-btn">ãƒ­ã‚°ã‚¤ãƒ³</button>
      <p id="loginError" class="login-error">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“</p>
    </div>
  </div>

  <!-- ====== ADMIN LAYOUT ====== -->
  <div id="adminLayout" class="admin-layout">
    <aside class="sidebar">
      <div class="sidebar-logo"><span>ğŸ¾</span> ç®¡ç†ç”»é¢</div>
      <nav class="sidebar-nav">
        <div class="nav-section">
          <div class="nav-section-title">ãƒ¡ã‚¤ãƒ³</div>
          <div class="nav-item active" data-page="dashboard"><span class="icon">ğŸ“Š</span> ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</div>
          <div class="nav-item" data-page="kittens"><span class="icon">ğŸ±</span> å­çŒ«ç®¡ç†</div>
          <div class="nav-item" data-page="parents"><span class="icon">ğŸˆ</span> è¦ªçŒ«ç®¡ç†</div>
        </div>
        <div class="nav-section">
          <div class="nav-section-title">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</div>
          <div class="nav-item" data-page="reviews"><span class="icon">â­</span> ãŠå®¢æ§˜ã®å£°</div>
          <div class="nav-item" data-page="export"><span class="icon">ğŸ“¤</span> HTMLå‡ºåŠ›</div>
        </div>
        <div class="nav-section">
          <div class="nav-section-title">è¨­å®š</div>
          <div class="nav-item" data-page="data"><span class="icon">ğŸ’¾</span> ãƒ‡ãƒ¼ã‚¿ç®¡ç†</div>
          <div class="nav-item" data-page="guide"><span class="icon">ğŸ“–</span> æ“ä½œã‚¬ã‚¤ãƒ‰</div>
          <div class="nav-item" data-page="settings"><span class="icon">âš™ï¸</span> ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´</div>
        </div>
      </nav>
      <div class="sidebar-footer">
        <button class="logout-btn" id="logoutBtn">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
      </div>
    </aside>

    <main class="main-content">
      <div class="top-bar">
        <h1 class="page-title" id="pageTitle">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
        <div class="top-actions">
          <a href="../index.html" target="_blank" class="top-btn btn-secondary">ã‚µã‚¤ãƒˆã‚’è¡¨ç¤º</a>
          <button class="top-btn btn-primary" id="addNewBtn" style="display:none">ï¼‹ æ–°è¦è¿½åŠ </button>
        </div>
      </div>

      <div class="content-area">

        <!-- ====== DASHBOARD ====== -->
        <div class="panel-page active" id="page-dashboard">
          <div class="stat-grid">
            <div class="stat-card"><div class="stat-icon">ğŸ±</div><div class="stat-value" id="statKittens">0</div><div class="stat-label">æ²è¼‰ä¸­ã®å­çŒ«</div></div>
            <div class="stat-card"><div class="stat-icon">ğŸˆ</div><div class="stat-value" id="statParents">0</div><div class="stat-label">è¦ªçŒ«</div></div>
            <div class="stat-card"><div class="stat-icon">â­</div><div class="stat-value" id="statReviews">0</div><div class="stat-label">ãƒ¬ãƒ“ãƒ¥ãƒ¼</div></div>
            <div class="stat-card"><div class="stat-icon">ğŸ’°</div><div class="stat-value" id="statAvailable">0</div><div class="stat-label">è²©å£²ä¸­</div></div>
          </div>
          <div class="data-table">
            <div class="table-header"><h3 class="table-title">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¥ã‚µãƒãƒªãƒ¼</h3></div>
            <div style="padding:24px;" id="dashboardSummary"></div>
          </div>
          <div class="data-table">
            <div class="table-header"><h3 class="table-title">æœ€è¿‘ã®å¤‰æ›´</h3></div>
            <div style="padding:24px;" id="dashboardLog">
              <p style="color:var(--text-light);font-size:13px">å¤‰æ›´å±¥æ­´ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®localStorageã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚</p>
              <div id="changeLog"></div>
            </div>
          </div>
        </div>

        <!-- ====== KITTENS ====== -->
        <div class="panel-page" id="page-kittens">
          <div class="data-table">
            <div class="table-header">
              <h3 class="table-title">å­çŒ«ä¸€è¦§</h3>
              <div class="table-actions">
                <select id="kittenFilterStatus" class="form-select" style="width:auto;padding:6px 12px;font-size:12px;">
                  <option value="all">ã™ã¹ã¦</option>
                  <option value="available">è²©å£²ä¸­</option>
                  <option value="reserved">å•†è«‡ä¸­</option>
                  <option value="sold">ã”å®¶æ—æ±ºå®š</option>
                </select>
              </div>
            </div>
            <div class="table-scroll">
              <table>
                <thead><tr>
                  <th class="thumb-cell">å†™çœŸ</th>
                  <th>ãƒ–ãƒªãƒ¼ãƒ€ãƒ¼ID</th>
                  <th>çŒ«ç¨®</th>
                  <th>æ€§åˆ¥</th>
                  <th>ã‚«ãƒ©ãƒ¼</th>
                  <th>èª•ç”Ÿæ—¥</th>
                  <th>ä¾¡æ ¼</th>
                  <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                  <th>ãƒ‘ãƒ‘ / ãƒãƒ</th>
                  <th>æ“ä½œ</th>
                </tr></thead>
                <tbody id="kittensTableBody"></tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- ====== PARENTS ====== -->
        <div class="panel-page" id="page-parents">
          <div class="data-table">
            <div class="table-header">
              <h3 class="table-title">è¦ªçŒ«ä¸€è¦§</h3>
              <div class="table-actions">
                <select id="parentFilterBreed" class="form-select" style="width:auto;padding:6px 12px;font-size:12px;">
                  <option value="all">ã™ã¹ã¦</option>
                  <option value="siberian">ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³</option>
                  <option value="british">ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥</option>
                  <option value="ragdoll">ãƒ©ã‚°ãƒ‰ãƒ¼ãƒ«</option>
                </select>
              </div>
            </div>
            <div class="table-scroll">
              <table>
                <thead><tr>
                  <th class="thumb-cell">å†™çœŸ</th>
                  <th>åå‰</th>
                  <th>çŒ«ç¨®</th>
                  <th>æ€§åˆ¥</th>
                  <th>ã‚«ãƒ©ãƒ¼</th>
                  <th>å¹´é½¢</th>
                  <th>å½¹å‰²</th>
                  <th>éºä¼å­æ¤œæŸ»</th>
                  <th>æ“ä½œ</th>
                </tr></thead>
                <tbody id="parentsTableBody"></tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- ====== REVIEWS ====== -->
        <div class="panel-page" id="page-reviews">
          <div class="data-table">
            <div class="table-header">
              <h3 class="table-title">ãŠå®¢æ§˜ã®å£°ä¸€è¦§</h3>
            </div>
            <div class="table-scroll">
              <table>
                <thead><tr>
                  <th>ãŠåå‰</th>
                  <th>åœ°åŸŸ</th>
                  <th>æ™‚æœŸ</th>
                  <th>æœ¬æ–‡ï¼ˆæŠœç²‹ï¼‰</th>
                  <th>æ“ä½œ</th>
                </tr></thead>
                <tbody id="reviewsTableBody"></tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- ====== EXPORT ====== -->
        <div class="panel-page" id="page-export">
          <div class="settings-card">
            <h3>ğŸ“¤ HTMLã‚³ãƒ¼ãƒ‰ç”Ÿæˆ</h3>
            <p style="color:var(--text-light);margin-bottom:16px;font-size:13px;">ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰index.htmlã®å­çŒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç”¨HTMLã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚<br>ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€index.htmlã®è©²å½“éƒ¨åˆ†ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚</p>
            <div style="display:flex;gap:12px;flex-wrap:wrap;">
              <button class="top-btn btn-primary" onclick="generateKittensHTML()">å­çŒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ HTMLç”Ÿæˆ</button>
              <button class="top-btn btn-primary" onclick="generateParentsHTML()">è¦ªçŒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ HTMLç”Ÿæˆ</button>
              <button class="top-btn btn-primary" onclick="generateReviewsHTML()">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ HTMLç”Ÿæˆ</button>
            </div>
          </div>
          <div id="generatedCodeArea" style="display:none;">
            <div class="settings-card">
              <h3 id="generatedCodeTitle">ç”Ÿæˆã•ã‚ŒãŸHTML</h3>
              <div class="code-block-wrapper">
                <button class="copy-btn" onclick="copyGeneratedCode()">ã‚³ãƒ”ãƒ¼</button>
                <pre class="code-block" id="generatedCode"></pre>
              </div>
            </div>
          </div>
          <div class="settings-card">
            <h3>ğŸ“‹ ã‚µã‚¤ãƒˆã¸ã®åæ˜ æ‰‹é †</h3>
            <div class="guide-step">
              <h4><span class="step-number">1</span> HTMLã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ</h4>
              <p>ä¸Šã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€æ›´æ–°ã—ãŸã„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®HTMLã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚</p>
            </div>
            <div class="guide-step">
              <h4><span class="step-number">2</span> ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼</h4>
              <p>ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã®ã€Œã‚³ãƒ”ãƒ¼ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚</p>
            </div>
            <div class="guide-step">
              <h4><span class="step-number">3</span> GitHubã§è©²å½“ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†</h4>
              <p>GitHubãƒªãƒã‚¸ãƒˆãƒªã®index.htmlï¼ˆã¾ãŸã¯kittens.html / parents.html / reviews.htmlï¼‰ã‚’é–‹ãã€è©²å½“ã™ã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã¦è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚</p>
            </div>
            <div class="guide-step">
              <h4><span class="step-number">4</span> Commitã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤</h4>
              <p>å¤‰æ›´ã‚’Commitã™ã‚‹ã¨ã€GitHub PagesãŒè‡ªå‹•ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚æ•°åˆ†å¾Œã«ã‚µã‚¤ãƒˆã«åæ˜ ã•ã‚Œã¾ã™ã€‚</p>
            </div>
          </div>
        </div>

        <!-- ====== DATA MANAGEMENT ====== -->
        <div class="panel-page" id="page-data">
          <div class="settings-card">
            <h3>ğŸ’¾ JSONãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</h3>
            <p style="color:var(--text-light);margin-bottom:16px;font-size:13px;">ç¾åœ¨ã®ç®¡ç†ãƒ‡ãƒ¼ã‚¿ï¼ˆå­çŒ«ãƒ»è¦ªçŒ«ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰ã‚’JSONå½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚</p>
            <button class="top-btn btn-primary" onclick="exportJSON()">JSONã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
          </div>
          <div class="settings-card">
            <h3>ğŸ“‚ JSONãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h3>
            <p style="color:var(--text-light);margin-bottom:16px;font-size:13px;">ä»¥å‰ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ãŸJSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å…ƒã—ã¾ã™ã€‚<br><strong style="color:var(--danger-dark)">æ³¨æ„ï¼šç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ãŒä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚</strong></p>
            <div class="photo-upload-area" id="importDropZone" onclick="document.getElementById('importFileInput').click()">
              <div class="icon">ğŸ“‚</div>
              <p>ã‚¯ãƒªãƒƒã‚¯ã—ã¦JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</p>
            </div>
            <input type="file" id="importFileInput" accept=".json" style="display:none">
          </div>
          <div class="settings-card">
            <h3>ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒªã‚»ãƒƒãƒˆ</h3>
            <p style="color:var(--text-light);margin-bottom:16px;font-size:13px;">ç®¡ç†ãƒ‡ãƒ¼ã‚¿ã‚’åˆæœŸçŠ¶æ…‹ï¼ˆã‚µã‚¤ãƒˆã®å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ï¼‰ã«æˆ»ã—ã¾ã™ã€‚</p>
            <button class="top-btn btn-danger" onclick="resetData()">ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆ</button>
          </div>
        </div>

        <!-- ====== GUIDE ====== -->
        <div class="panel-page" id="page-guide">
          <div class="settings-card">
            <h3>ğŸ“– æ“ä½œã‚¬ã‚¤ãƒ‰</h3>
            <p style="color:var(--text-light);margin-bottom:24px;font-size:13px;">ç®¡ç†ç”»é¢ã®åŸºæœ¬çš„ãªæ“ä½œæ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚</p>
          </div>

          <div class="guide-step">
            <h4><span class="step-number">1</span> å­çŒ«ã‚’è¿½åŠ ã™ã‚‹</h4>
            <p>ã€Œå­çŒ«ç®¡ç†ã€ãƒšãƒ¼ã‚¸ã§å³ä¸Šã®ã€Œï¼‹ æ–°è¦è¿½åŠ ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã€‚<br>ãƒ–ãƒªãƒ¼ãƒ€ãƒ¼IDã€çŒ«ç¨®ã€æ€§åˆ¥ã€ã‚«ãƒ©ãƒ¼ã€èª•ç”Ÿæ—¥ã€ä¾¡æ ¼ã‚’å…¥åŠ›ã—ã¦ä¿å­˜ã—ã¾ã™ã€‚<br>ãƒ‘ãƒ‘çŒ«ãƒ»ãƒãƒçŒ«ã¯ç™»éŒ²æ¸ˆã¿ã®è¦ªçŒ«ã‹ã‚‰é¸æŠã§ãã¾ã™ã€‚</p>
          </div>

          <div class="guide-step">
            <h4><span class="step-number">2</span> å°é¢å†™çœŸï¼ˆã‚«ãƒãƒ¼å†™çœŸï¼‰ã‚’å¤‰æ›´ã™ã‚‹</h4>
            <p>å­çŒ«ãƒ»è¦ªçŒ«ã®ä¸€è¦§ã§ã€Œå†™çœŸã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã€‚<br>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆbase64ã§ä¿å­˜ï¼‰ã™ã‚‹ã‹ã€ç”»åƒURLã‚’å…¥åŠ›ã—ã¾ã™ã€‚<br>å¤‰æ›´ã¯localStorageã«å³æ™‚ä¿å­˜ã•ã‚Œã¾ã™ã€‚</p>
          </div>

          <div class="guide-step">
            <h4><span class="step-number">3</span> ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å¤‰æ›´ã™ã‚‹</h4>
            <p>å­çŒ«ã®ã€Œç·¨é›†ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å¤‰æ›´ã—ã¾ã™ã€‚<br>ã€Œè²©å£²ä¸­ã€â†’ã€Œå•†è«‡ä¸­ã€â†’ã€Œã”å®¶æ—æ±ºå®šã€ã®é †ã§æ›´æ–°ã§ãã¾ã™ã€‚</p>
          </div>

          <div class="guide-step">
            <h4><span class="step-number">4</span> ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ»ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹</h4>
            <p>ã€Œãƒ‡ãƒ¼ã‚¿ç®¡ç†ã€ãƒšãƒ¼ã‚¸ã§ã€ŒJSONã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€å…¨ãƒ‡ãƒ¼ã‚¿ãŒJSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚<br>ä»–ã®PCã‚„ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p>
          </div>

          <div class="guide-step">
            <h4><span class="step-number">5</span> ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’æ›´æ–°ã™ã‚‹</h4>
            <p>ã€ŒHTMLå‡ºåŠ›ã€ãƒšãƒ¼ã‚¸ã§æ›´æ–°ã—ãŸã„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®HTMLã‚’ç”Ÿæˆã—ã¾ã™ã€‚<br>ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã€GitHubãƒªãƒã‚¸ãƒˆãƒªã®è©²å½“HTMLãƒ•ã‚¡ã‚¤ãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦Commitã€‚<br>GitHub PagesãŒè‡ªå‹•çš„ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ï¼ˆæ•°åˆ†ã§åæ˜ ï¼‰ã€‚</p>
          </div>

          <div class="guide-step">
            <h4><span class="step-number">6</span> ãƒ‡ãƒ¼ã‚¿ã®ä»•çµ„ã¿ã«ã¤ã„ã¦</h4>
            <p>ã“ã®ã‚µã‚¤ãƒˆã¯GitHub Pagesã®é™çš„ã‚µã‚¤ãƒˆã®ãŸã‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>ç®¡ç†ç”»é¢ã®ãƒ‡ãƒ¼ã‚¿ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®localStorageã«ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>ãƒ–ãƒ©ã‚¦ã‚¶ã‚’å¤‰æ›´ã—ãŸã‚Šã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ¶ˆå»ã™ã‚‹ã¨ã€ãƒ‡ãƒ¼ã‚¿ãŒåˆæœŸåŒ–ã•ã‚Œã¾ã™ã€‚<br>å¿…ãšå®šæœŸçš„ã«JSONã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã§ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–ã£ã¦ãã ã•ã„ã€‚</p>
          </div>
        </div>

        <!-- ====== SETTINGS ====== -->
        <div class="panel-page" id="page-settings">
          <div class="settings-card">
            <h3>ğŸ” ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´</h3>
            <div class="form-row">
              <div class="form-group"><label class="form-label">æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label><input class="form-input" type="password" id="newPassword"></div>
              <div class="form-group"><label class="form-label">ç¢ºèª</label><input class="form-input" type="password" id="confirmPassword"></div>
            </div>
            <button class="btn-save" id="changePasswordBtn">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´</button>
          </div>
        </div>

      </div>
    </main>
  </div>

  <!-- ====== KITTEN FORM MODAL ====== -->
  <div class="modal-overlay" id="kittenFormModal">
    <div class="modal modal-lg">
      <div class="modal-header"><h2 id="kittenFormTitle">å­çŒ«ã®è¿½åŠ </h2><button class="modal-close" onclick="closeModal('kittenFormModal')">Ã—</button></div>
      <div class="modal-body">
        <input type="hidden" id="kittenEditId">
        <div class="form-row">
          <div class="form-group"><label class="form-label">ãƒ–ãƒªãƒ¼ãƒ€ãƒ¼ID *</label><input class="form-input" id="kf_breederId" placeholder="ä¾‹ï¼š2509-02907"><div class="form-hint">ã¿ã‚“ãªã®å­çŒ«ãƒ–ãƒªãƒ¼ãƒ€ãƒ¼ã®æ²è¼‰ID</div></div>
          <div class="form-group"><label class="form-label">çŒ«ç¨® *</label><select class="form-select" id="kf_breed"><option>ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³</option><option>ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢</option><option>ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ãƒ­ãƒ³ã‚°ãƒ˜ã‚¢</option><option>ãƒ©ã‚°ãƒ‰ãƒ¼ãƒ«</option><option>ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³Ã—ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥</option></select></div>
        </div>
        <div class="form-row-3">
          <div class="form-group"><label class="form-label">æ€§åˆ¥ *</label><select class="form-select" id="kf_gender"><option value="â™‚">â™‚ ç”·ã®å­</option><option value="â™€">â™€ å¥³ã®å­</option></select></div>
          <div class="form-group"><label class="form-label">ã‚«ãƒ©ãƒ¼ *</label><input class="form-input" id="kf_color" placeholder="ä¾‹ï¼šãƒ–ãƒ«ãƒ¼ãƒªãƒ³ã‚¯ã‚¹ãƒã‚¤ãƒ³ãƒˆ"></div>
          <div class="form-group"><label class="form-label">èª•ç”Ÿæ—¥ *</label><input class="form-input" type="month" id="kf_birthday"></div>
        </div>
        <div class="form-row-3">
          <div class="form-group"><label class="form-label">ä¾¡æ ¼ï¼ˆç¨è¾¼ï¼‰*</label><input class="form-input" type="number" id="kf_price" placeholder="250000"></div>
          <div class="form-group"><label class="form-label">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ *</label><select class="form-select" id="kf_status"><option value="available">è²©å£²ä¸­</option><option value="reserved">å•†è«‡ä¸­</option><option value="sold">ã”å®¶æ—æ±ºå®š</option></select></div>
          <div class="form-group"><label class="form-label">NEWãƒãƒƒã‚¸</label><select class="form-select" id="kf_isNew"><option value="true">è¡¨ç¤º</option><option value="false">éè¡¨ç¤º</option></select></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label class="form-label">ãƒ‘ãƒ‘çŒ«</label><select class="form-select" id="kf_papa"><option value="">-- é¸æŠ --</option></select></div>
          <div class="form-group"><label class="form-label">ãƒãƒçŒ«</label><select class="form-select" id="kf_mama"><option value="">-- é¸æŠ --</option></select></div>
        </div>
        <div class="form-group">
          <label class="form-label">ã‚«ãƒãƒ¼å†™çœŸURL</label>
          <input class="form-input" id="kf_coverPhoto" placeholder="https://...">
          <div class="form-hint">koneko-breeder.comã®ç”»åƒURLã¾ãŸã¯ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸç”»åƒURL</div>
        </div>
        <div class="form-group">
          <label class="form-label">å‚™è€ƒ</label>
          <input class="form-input" id="kf_note" placeholder="ä¾‹ï¼šå»å‹¢æ¸ˆã¿">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-cancel" onclick="closeModal('kittenFormModal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button class="btn-save" onclick="saveKitten()">ä¿å­˜ã™ã‚‹</button>
      </div>
    </div>
  </div>

  <!-- ====== PARENT FORM MODAL ====== -->
  <div class="modal-overlay" id="parentFormModal">
    <div class="modal">
      <div class="modal-header"><h2 id="parentFormTitle">è¦ªçŒ«ã®ç·¨é›†</h2><button class="modal-close" onclick="closeModal('parentFormModal')">Ã—</button></div>
      <div class="modal-body">
        <input type="hidden" id="parentEditId">
        <div class="form-row">
          <div class="form-group"><label class="form-label">åå‰ *</label><input class="form-input" id="pf_name" placeholder="ä¾‹ï¼šã—ã‚ãã‚“"></div>
          <div class="form-group"><label class="form-label">çŒ«ç¨® *</label><select class="form-select" id="pf_breed"><option>ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³</option><option>ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢</option><option>ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ãƒ­ãƒ³ã‚°ãƒ˜ã‚¢</option><option>ãƒ©ã‚°ãƒ‰ãƒ¼ãƒ«</option></select></div>
        </div>
        <div class="form-row-3">
          <div class="form-group"><label class="form-label">æ€§åˆ¥</label><select class="form-select" id="pf_gender"><option value="â™‚">â™‚</option><option value="â™€">â™€</option></select></div>
          <div class="form-group"><label class="form-label">ã‚«ãƒ©ãƒ¼</label><input class="form-input" id="pf_color" placeholder="ä¾‹ï¼šãƒ›ãƒ¯ã‚¤ãƒˆ"></div>
          <div class="form-group"><label class="form-label">å¹´é½¢</label><input class="form-input" id="pf_age" placeholder="ä¾‹ï¼š3æ­³"></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label class="form-label">å½¹å‰²</label><select class="form-select" id="pf_role"><option value="ãƒ‘ãƒ‘çŒ«">ãƒ‘ãƒ‘çŒ«</option><option value="ãƒãƒçŒ«">ãƒãƒçŒ«</option></select></div>
          <div class="form-group"><label class="form-label">éºä¼å­æ¤œæŸ»</label><select class="form-select" id="pf_tested"><option value="true">æ¤œæŸ»æ¸ˆã¿</option><option value="false">æœªæ¤œæŸ»</option></select></div>
        </div>
        <div class="form-group">
          <label class="form-label">ã‚«ãƒãƒ¼å†™çœŸURL</label>
          <input class="form-input" id="pf_coverPhoto" placeholder="https://...">
        </div>
        <div class="form-group">
          <label class="form-label">ãƒ–ãƒªãƒ¼ãƒ€ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—</label>
          <select class="form-select" id="pf_group"><option value="c995680">ç¾…æ–¹é ï¼ˆc995680ï¼‰</option><option value="d696506">åˆ˜å°æ£‰ï¼ˆd696506ï¼‰</option></select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-cancel" onclick="closeModal('parentFormModal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button class="btn-save" onclick="saveParent()">ä¿å­˜ã™ã‚‹</button>
      </div>
    </div>
  </div>

  <!-- ====== REVIEW FORM MODAL ====== -->
  <div class="modal-overlay" id="reviewFormModal">
    <div class="modal">
      <div class="modal-header"><h2 id="reviewFormTitle">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ç·¨é›†</h2><button class="modal-close" onclick="closeModal('reviewFormModal')">Ã—</button></div>
      <div class="modal-body">
        <input type="hidden" id="reviewEditId">
        <div class="form-row">
          <div class="form-group"><label class="form-label">ãŠåå‰ *</label><input class="form-input" id="rf_author" placeholder="ä¾‹ï¼šL.Aæ§˜"></div>
          <div class="form-group"><label class="form-label">åœ°åŸŸ *</label><input class="form-input" id="rf_region" placeholder="ä¾‹ï¼šå¤§é˜ªåºœ"></div>
        </div>
        <div class="form-group"><label class="form-label">æ™‚æœŸ</label><input class="form-input" id="rf_date" placeholder="ä¾‹ï¼š2026å¹´1æœˆ"></div>
        <div class="form-group"><label class="form-label">æœ¬æ–‡ *</label><textarea class="form-textarea" id="rf_body" rows="4"></textarea></div>
      </div>
      <div class="modal-footer">
        <button class="btn-cancel" onclick="closeModal('reviewFormModal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button class="btn-save" onclick="saveReview()">ä¿å­˜ã™ã‚‹</button>
      </div>
    </div>
  </div>

  <!-- ====== PHOTO MODAL ====== -->
  <div class="modal-overlay" id="photoModal">
    <div class="modal">
      <div class="modal-header"><h2>ã‚«ãƒãƒ¼å†™çœŸã®å¤‰æ›´</h2><button class="modal-close" onclick="closeModal('photoModal')">Ã—</button></div>
      <div class="modal-body">
        <input type="hidden" id="photo_type">
        <input type="hidden" id="photo_id">
        <div id="photoCurrentPreview" style="text-align:center;margin-bottom:20px;">
          <p style="font-size:13px;color:var(--text-light);margin-bottom:8px;">ç¾åœ¨ã®å†™çœŸ:</p>
          <img id="photoCurrentImg" src="" style="max-width:300px;max-height:200px;border-radius:8px;border:1px solid var(--border);">
        </div>
        <div class="form-group">
          <label class="form-label">ç”»åƒURL</label>
          <input class="form-input" id="photo_url" placeholder="https://...">
          <div class="form-hint">å¤–éƒ¨ç”»åƒURLã‚’å…¥åŠ›</div>
        </div>
        <div class="form-group">
          <label class="form-label">ã¾ãŸã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</label>
          <div class="photo-upload-area" onclick="document.getElementById('photoFileInput').click()">
            <div class="icon">ğŸ“·</div>
            <p>ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç”»åƒã‚’é¸æŠ</p>
          </div>
          <input type="file" id="photoFileInput" accept="image/*" style="display:none">
          <div id="photoUploadPreview" class="photo-preview-container" style="display:none;text-align:center;margin-top:12px;">
            <img id="photoUploadImg" class="photo-preview-img" src="">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-cancel" onclick="closeModal('photoModal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button class="btn-save" onclick="savePhoto()">å†™çœŸã‚’ä¿å­˜</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

<script>
// ============================================================
// INITIAL DATA - Pre-populated from actual website
// ============================================================
const DEFAULT_KITTENS = [
  { id:'k1', breederId:'2602-00625', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™‚', color:'ãƒ–ãƒ«ãƒ¼ãƒªãƒ³ã‚¯ã‚¹ãƒã‚¤ãƒ³ãƒˆ ãƒãƒ´ã‚¡ãƒã‚¹ã‚«ãƒ¬ãƒ¼ãƒ‰', birthday:'2025-12', price:200000, status:'available', papa:'ã—ã‚ãã‚“', mama:'å¤§è“ã¡ã‚ƒã‚“', isNew:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/child_img_1_thumb_mob_bcdb713f28a6.jpg', note:'', group:'c995680' },
  { id:'k2', breederId:'2601-01855', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™‚', color:'ã‚·ãƒ«ãƒãƒ¼ã‚¿ãƒ“ãƒ¼ ãƒˆãƒªãƒ—ãƒ«ã‚³ãƒ¼ãƒˆ', birthday:'2025-12', price:250000, status:'available', papa:'ã—ã‚ãã‚“', mama:'å°éƒ­ã¡ã‚ƒã‚“', isNew:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/child_img_1_thumb_mob_5c3c7d28b3c6.jpg', note:'', group:'c995680' },
  { id:'k3', breederId:'2601-00909', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™€', color:'ãƒ–ãƒ«ãƒ¼ãƒªãƒ³ã‚¯ã‚¹ãƒã‚¤ãƒ³ãƒˆ ãƒãƒ´ã‚¡ãƒã‚¹ã‚«ãƒ¬ãƒ¼ãƒ‰', birthday:'2025-12', price:280000, status:'available', papa:'ã—ã‚ãã‚“', mama:'å¤§è“ã¡ã‚ƒã‚“', isNew:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/child_img_1_thumb_mob_f145444950e5.jpg', note:'', group:'c995680' },
  { id:'k4', breederId:'2509-01171', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™‚', color:'ãƒ¬ãƒƒãƒ‰ãƒªãƒ³ã‚¯ã‚¹ãƒã‚¤ãƒ³ãƒˆ', birthday:'2025-05', price:250000, status:'available', papa:'ã—ã‚ãã‚“', mama:'å’¬å’¬ã¡ã‚ƒã‚“', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/child_img_1_thumb_mob_474a3e0acd95.jpg', note:'', group:'c995680' },
  { id:'k5', breederId:'2511-02287', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™‚', color:'ãƒ–ãƒ©ã‚¦ãƒ³ã‚¿ãƒ“ãƒ¼ ãƒˆãƒªãƒ—ãƒ«ã‚³ãƒ¼ãƒˆ', birthday:'2025-10', price:220000, status:'available', papa:'ã—ã‚ãã‚“', mama:'åœ†åœ†ã¡ã‚ƒã‚“', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/child_img_1_thumb_mob_5286e955d406.jpg', note:'', group:'c995680' },
  { id:'k6', breederId:'2509-02086', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™€', color:'ã‚·ãƒ«ãƒãƒ¼ã‚¿ãƒ“ãƒ¼', birthday:'2025-06', price:190000, status:'available', papa:'ã—ã‚ãã‚“', mama:'dodoã¡ã‚ƒã‚“', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/child_img_1_thumb_mob_a8ee8be38f02.jpg', note:'', group:'c995680' },
  { id:'k7', breederId:'2511-01887', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™‚', color:'ãƒ›ãƒ¯ã‚¤ãƒˆ ãƒˆãƒªãƒ—ãƒ«ã‚³ãƒ¼ãƒˆ', birthday:'2025-09', price:250000, status:'available', papa:'ã—ã‚ãã‚“', mama:'å°è“ã¡ã‚ƒã‚“', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/child_img_1_thumb_mob_53e1c8b9b691.jpg', note:'', group:'c995680' },
  { id:'k8', breederId:'2601-00912', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™€', color:'ãƒ–ãƒ«ãƒ¼ãƒªãƒ³ã‚¯ã‚¹ãƒã‚¤ãƒ³ãƒˆ ãƒãƒ´ã‚¡ãƒã‚¹ã‚«ãƒ¬ãƒ¼ãƒ‰', birthday:'2025-12', price:200000, status:'available', papa:'ã—ã‚ãã‚“', mama:'å¤§è“ã¡ã‚ƒã‚“', isNew:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/child_img_1_thumb_mob_6416db1fca26.jpg', note:'', group:'c995680' },
  { id:'k9', breederId:'2508-00310', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™‚', color:'ã‚·ãƒ«ãƒãƒ¼ã‚·ã‚§ãƒ¼ãƒ‡ãƒƒãƒ‰', birthday:'2025-06', price:220000, status:'available', papa:'ã—ã‚ãã‚“', mama:'Paopaoã¡ã‚ƒã‚“', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/child_img_1_thumb_mob_f1fe3e295975.jpg', note:'å»å‹¢æ¸ˆã¿', group:'c995680' },
  { id:'k10', breederId:'2512-01681', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™‚', color:'ãƒ–ãƒ«ãƒ¼ãƒ‘ãƒƒãƒãƒ‰ã‚¿ãƒ“ãƒ¼ï¼†ãƒ›ãƒ¯ã‚¤ãƒˆ', birthday:'2025-10', price:220000, status:'available', papa:'', mama:'', isNew:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/child_img_1_thumb_mob_65cda2df7c23.jpg', note:'', group:'c995680' },
  { id:'k11', breederId:'2510-01286', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™€', color:'ãƒ–ãƒ©ã‚¦ãƒ³ã‚¿ãƒ“ãƒ¼ ãƒˆãƒªãƒ—ãƒ«ã‚³ãƒ¼ãƒˆ', birthday:'2025-07', price:200000, status:'available', papa:'', mama:'', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/child_img_1_thumb_mob_b63fb3ed0d40.jpg', note:'', group:'c995680' },
  { id:'k12', breederId:'2511-00142', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™‚', color:'ãƒ›ãƒ¯ã‚¤ãƒˆ', birthday:'2025-07', price:200000, status:'available', papa:'', mama:'', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/child_img_1_thumb_mob_55de77e44ae3.jpg', note:'', group:'c995680' },
  { id:'k13', breederId:'2511-00143', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™€', color:'ãƒ›ãƒ¯ã‚¤ãƒˆ', birthday:'2025-07', price:180000, status:'available', papa:'', mama:'', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/child_img_1_thumb_mob_1d50735f1243.jpg', note:'', group:'c995680' },
  { id:'k14', breederId:'2508-02468', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™‚', color:'ã‚·ãƒ«ãƒãƒ¼ï¼†ãƒ›ãƒ¯ã‚¤ãƒˆ ãƒˆãƒªãƒ—ãƒ«ã‚³ãƒ¼ãƒˆ', birthday:'2025-06', price:190000, status:'available', papa:'', mama:'', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/child_img_1_thumb_mob_ba3d34ebc731.jpg', note:'å»å‹¢æ¸ˆã¿', group:'c995680' },
  { id:'k15', breederId:'2509-01027', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™‚', color:'ãƒ¬ãƒƒãƒ‰ãƒªãƒ³ã‚¯ã‚¹ãƒã‚¤ãƒ³ãƒˆ ãƒˆãƒªãƒ—ãƒ«ã‚³ãƒ¼ãƒˆ', birthday:'2025-05', price:220000, status:'available', papa:'', mama:'', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/child_img_1_thumb_mob_b0c784c03b06.jpg', note:'å»å‹¢æ¸ˆã¿', group:'c995680' },
  { id:'k16', breederId:'2508-03366', breed:'ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢', gender:'â™€', color:'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚·ã‚§ãƒ¼ãƒ‡ãƒƒãƒ‰', birthday:'2025-05', price:280000, status:'available', papa:'', mama:'', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/child_img_1_thumb_mob_2626e51e5216.jpg', note:'', group:'d696506' },
  { id:'k17', breederId:'2508-03312', breed:'ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢', gender:'â™€', color:'ãƒãƒ³ãƒãƒ©ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ ãƒ­ãƒ³ã‚°ãƒ˜ã‚¢', birthday:'2025-05', price:280000, status:'available', papa:'', mama:'', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/child_img_1_thumb_mob_ae83160357f5.jpg', note:'', group:'d696506' },
  { id:'k18', breederId:'2508-03355', breed:'ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢', gender:'â™‚', color:'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚·ã‚§ãƒ¼ãƒ‡ãƒƒãƒ‰', birthday:'2025-05', price:240000, status:'available', papa:'', mama:'', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/child_img_1_thumb_mob_fef0dac4d322.jpg', note:'', group:'d696506' },
  { id:'k19', breederId:'2509-00562', breed:'ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢', gender:'â™€', color:'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚·ã‚§ãƒ¼ãƒ‡ãƒƒãƒ‰ï¼†ãƒ›ãƒ¯ã‚¤ãƒˆ', birthday:'2025-05', price:160000, status:'available', papa:'', mama:'', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/child_img_1_thumb_mob_fa5d32abfe16.jpg', note:'', group:'d696506' },
  { id:'k20', breederId:'2512-00115', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³Ã—ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥', gender:'â™€', color:'ãƒ–ãƒ©ã‚¦ãƒ³ã‚¿ãƒ“ãƒ¼ï¼†ãƒ›ãƒ¯ã‚¤ãƒˆ', birthday:'2025-09', price:140000, status:'available', papa:'', mama:'', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/child_img_1_thumb_mob_98b9c6bfeaf2.jpg', note:'', group:'d696506' },
  { id:'k21', breederId:'2509-02907', breed:'ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢', gender:'â™€', color:'ãƒ–ãƒ©ã‚¦ãƒ³ã‚¿ãƒ“ãƒ¼ï¼†ãƒ›ãƒ¯ã‚¤ãƒˆ', birthday:'2025-08', price:160000, status:'available', papa:'', mama:'', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/child_img_1_thumb_mob_6733bee9a639.jpg', note:'', group:'d696506' },
  { id:'k22', breederId:'2510-01844', breed:'ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢', gender:'â™‚', color:'ãƒ›ãƒ¯ã‚¤ãƒˆ', birthday:'2025-08', price:160000, status:'available', papa:'', mama:'', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/child_img_1_thumb_mob_aad8b700cc92.jpg', note:'', group:'d696506' },
  { id:'k23', breederId:'2408-03054', breed:'ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ãƒ­ãƒ³ã‚°ãƒ˜ã‚¢', gender:'â™‚', color:'ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ ãƒ­ãƒ³ã‚°ãƒ˜ã‚¢', birthday:'2024-02', price:290000, status:'reserved', papa:'', mama:'', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/child_img_1_thumb_mob_85a6f25bfdc0.jpg', note:'', group:'d696506' },
  { id:'k24', breederId:'2512-00112', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³Ã—ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥', gender:'â™‚', color:'ãƒ›ãƒ¯ã‚¤ãƒˆ', birthday:'2025-09', price:150000, status:'reserved', papa:'', mama:'', isNew:false, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/child_img_1_thumb_mob_ed4f2b764841.jpg', note:'', group:'d696506' },
];

const DEFAULT_PARENTS = [
  { id:'p1', name:'ã—ã‚ãã‚“', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™‚', role:'ãƒ‘ãƒ‘çŒ«', age:'3æ­³', color:'ãƒ›ãƒ¯ã‚¤ãƒˆ', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/cat_img_1_thumb_pc_6afed78ede63.jpg', group:'c995680' },
  { id:'p2', name:'å¤§è“ã¡ã‚ƒã‚“', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™€', role:'ãƒãƒçŒ«', age:'1æ­³', color:'ãƒ›ãƒ¯ã‚¤ãƒˆ', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/cat_img_1_thumb_pc_b5ac7ae2ae72.jpg', group:'c995680' },
  { id:'p3', name:'Paopaoã¡ã‚ƒã‚“', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™€', role:'ãƒãƒçŒ«', age:'2æ­³', color:'ã‚·ãƒ«ãƒãƒ¼', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/cat_img_1_thumb_pc_b5983dfb7d48.jpg', group:'c995680' },
  { id:'p4', name:'å°éƒ­ã¡ã‚ƒã‚“', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™€', role:'ãƒãƒçŒ«', age:'2æ­³', color:'ãƒ€ã‚¤ãƒªãƒ¥ãƒ¼ãƒˆã‚­ãƒ£ãƒªã‚³', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/cat_img_1_thumb_pc_0afe3b8e56d4.jpg', group:'c995680' },
  { id:'p5', name:'å’¬å’¬ã¡ã‚ƒã‚“', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™€', role:'ãƒãƒçŒ«', age:'2æ­³', color:'ã‚·ãƒ«ãƒãƒ¼ã‚¿ãƒ“ãƒ¼ï¼†ãƒ›ãƒ¯ã‚¤ãƒˆ', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/cat_img_1_thumb_pc_4422ed265045.jpg', group:'c995680' },
  { id:'p6', name:'dodoã¡ã‚ƒã‚“', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™€', role:'ãƒãƒçŒ«', age:'2æ­³', color:'ã‚·ãƒ«ãƒãƒ¼ï¼†ãƒ›ãƒ¯ã‚¤ãƒˆ', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/cat_img_1_thumb_pc_ec6352afa910.jpg', group:'c995680' },
  { id:'p7', name:'å°è“ã¡ã‚ƒã‚“', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™€', role:'ãƒãƒçŒ«', age:'2æ­³', color:'ãƒ›ãƒ¯ã‚¤ãƒˆ', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/cat_img_1_thumb_pc_c22631c010d3.jpg', group:'c995680' },
  { id:'p8', name:'åœ†åœ†ã¡ã‚ƒã‚“', breed:'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³', gender:'â™€', role:'ãƒãƒçŒ«', age:'3æ­³', color:'ãƒ›ãƒ¯ã‚¤ãƒˆ', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/c995680/cat_img_11_thumb_pc_66a5ccf1ced9.jpg', group:'c995680' },
  { id:'p9', name:'æç™½ãã‚“', breed:'ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ãƒ­ãƒ³ã‚°ãƒ˜ã‚¢', gender:'â™‚', role:'ãƒ‘ãƒ‘çŒ«', age:'2æ­³', color:'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ãƒã‚¤ãƒ³ãƒˆ', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/cat_img_1_thumb_pc_a2da2f2fef02.jpg', group:'d696506' },
  { id:'p10', name:'Chouã¡ã‚ƒã‚“', breed:'ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢', gender:'â™€', role:'ãƒãƒçŒ«', age:'2æ­³', color:'ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/cat_img_1_thumb_pc_88eb7b14df97.jpg', group:'d696506' },
  { id:'p11', name:'ãƒãƒ§ã‚³ã¡ã‚ƒã‚“', breed:'ãƒ©ã‚°ãƒ‰ãƒ¼ãƒ«', gender:'â™€', role:'ãƒãƒçŒ«', age:'2æ­³', color:'ã‚·ãƒ¼ãƒ«ãƒã‚¤ãƒ³ãƒˆãƒã‚¤ã‚«ãƒ©ãƒ¼', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/cat_img_1_thumb_pc_741073a29495.jpg', group:'d696506' },
  { id:'p12', name:'Jiaãã‚“', breed:'ãƒ©ã‚°ãƒ‰ãƒ¼ãƒ«', gender:'â™‚', role:'ãƒ‘ãƒ‘çŒ«', age:'3æ­³', color:'ã‚·ãƒ¼ãƒ«ãƒªãƒ³ã‚¯ã‚¹ãƒã‚¤ãƒ³ãƒˆ', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/cat_img_1_thumb_pc_688006a11852.jpg', group:'d696506' },
  { id:'p13', name:'ç‹å­ãã‚“', breed:'ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ãƒ­ãƒ³ã‚°ãƒ˜ã‚¢', gender:'â™‚', role:'ãƒ‘ãƒ‘çŒ«', age:'3æ­³', color:'ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/cat_img_1_thumb_pc_ed89e98d3344.jpg', group:'d696506' },
  { id:'p14', name:'ãƒ‘ãƒ³ã¡ã‚ƒã‚“', breed:'ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢', gender:'â™€', role:'ãƒãƒçŒ«', age:'4æ­³', color:'ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/cat_img_1_thumb_pc_42a1dc3fd4c1.jpg', group:'d696506' },
  { id:'p15', name:'å£®ãã‚“', breed:'ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ãƒ­ãƒ³ã‚°ãƒ˜ã‚¢', gender:'â™‚', role:'ãƒ‘ãƒ‘çŒ«', age:'4æ­³', color:'ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/cat_img_1_thumb_pc_19b6882720e1.jpg', group:'d696506' },
  { id:'p16', name:'Shoã¡ã‚ƒã‚“', breed:'ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢', gender:'â™€', role:'ãƒãƒçŒ«', age:'4æ­³', color:'ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³', tested:true, coverPhoto:'https://www.koneko-breeder.com/breeder/data/d696506/cat_img_1_thumb_pc_e1be51891236.jpg', group:'d696506' },
];

const DEFAULT_REVIEWS = [
  { id:'r1', author:'L.Aæ§˜', region:'å¤§é˜ªåºœ', date:'2026å¹´1æœˆ', body:'è³ªå•ã«ã‚‚ä¸å¯§ã«ç­”ãˆã¦ãã ã•ã‚Šã€å¼•ãæ¸¡ã—å‰ã«ã¯çˆªåˆ‡ã‚Šã‚„ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼ã¾ã§æº–å‚™ã—ã¦ãã ã•ã„ã¾ã—ãŸã€‚ã¨ã¦ã‚‚å®‰å¿ƒã—ã¦ãŠè¿ãˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ã‚¢ãƒ•ã‚¿ãƒ¼ãƒ•ã‚©ãƒ­ãƒ¼ã‚‚æ‰‹åšãã€æ„Ÿè¬ã—ã¦ã„ã¾ã™ã€‚' },
  { id:'r2', author:'Keiæ§˜', region:'æ»‹è³€çœŒ', date:'2026å¹´1æœˆ', body:'èª¬æ˜ãŒã¨ã¦ã‚‚åˆ†ã‹ã‚Šã‚„ã™ãã€ç´ æ™´ã‚‰ã—ã„ãƒ–ãƒªãƒ¼ãƒ€ãƒ¼ã•ã‚“ã§ã™ã€‚å¯æ„›ã„å­çŒ«ã‚’ãŠè¿ãˆã§ãã€é£Ÿäº‹ã‚„ã‚±ã‚¢ã«ã¤ã„ã¦ã‚‚ä¸å¯§ã«ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã„ãŸã ãã¾ã—ãŸã€‚ã“ã‚Œã‹ã‚‰ã®æˆé•·ãŒæ¥½ã—ã¿ã§ã™ã€‚' },
  { id:'r3', author:'H.Uæ§˜', region:'å¤§é˜ªåºœ', date:'2026å¹´1æœˆ', body:'åˆã‚ã¦çŒ«ã‚’é£¼ã„ã¾ã—ãŸãŒã€ã¨ã¦ã‚‚ä¸å¯§ã«ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãŸã ã‘ã¾ã—ãŸã€‚å­çŒ«ã¯ã™ãã«ã”é£¯ã‚’é£Ÿã¹ã¦ãã‚Œã¦ã€äººæ‡ã“ãã¦ã¨ã¦ã‚‚å¯æ„›ã„ã§ã™ã€‚LINEã§ã®ç›¸è«‡ã«ã‚‚è¿…é€Ÿã«å¯¾å¿œã—ã¦ãã ã•ã‚ŠåŠ©ã‹ã£ã¦ã„ã¾ã™ã€‚' },
  { id:'r4', author:'D.Sæ§˜', region:'å’Œæ­Œå±±çœŒ', date:'2026å¹´1æœˆ', body:'äºˆå®šå¤‰æ›´ã«ã‚‚æŸ”è»Ÿã«å¯¾å¿œã—ã¦ãã ã•ã‚Šã€å­çŒ«ã®æˆé•·å‹•ç”»ã‚‚é€ã£ã¦ãã ã•ã„ã¾ã—ãŸã€‚ãƒ–ãƒªãƒ¼ãƒ€ãƒ¼ã•ã‚“ã®çŒ«ã¸ã®æ„›æƒ…ãŒã¨ã¦ã‚‚ä¼ã‚ã‚Šã¾ã™ã€‚ãŠè¿ãˆã—ãŸå­çŒ«ã¯ã¨ã¦ã‚‚å…ƒæ°—ã§å¹¸ã›ã§ã™ã€‚' },
  { id:'r5', author:'ãƒ‰ãƒ©ãƒ æ§˜', region:'å¤§é˜ªåºœ', date:'2025å¹´12æœˆ', body:'å‹•ç‰©ã¸ã®æ„›æƒ…ãŒæœ¬ç‰©ã ã¨æ„Ÿã˜ã‚‰ã‚Œã‚‹ãƒ–ãƒªãƒ¼ãƒ€ãƒ¼ã•ã‚“ã§ã™ã€‚ãŠè¿ãˆåˆæ—¥ã‹ã‚‰ã™ãã«é¦´æŸ“ã‚“ã§ãã‚Œã¾ã—ãŸã€‚ç’°å¢ƒãŒç´ æ™´ã‚‰ã—ãã€å­çŒ«ã®ç¤¾ä¼šåŒ–ã‚‚ã—ã£ã‹ã‚Šã•ã‚Œã¦ã„ã¾ã™ã€‚' },
  { id:'r6', author:'Tæ§˜', region:'æ±äº¬éƒ½', date:'2025å¹´12æœˆ', body:'é æ–¹ã‹ã‚‰ã§ã—ãŸãŒã€LINEãƒ“ãƒ‡ã‚ªé€šè©±ã§äº‹å‰ã«å­çŒ«ã‚’è¦‹ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚å®Ÿç‰©ã¯ã•ã‚‰ã«å¯æ„›ãã€æ€§æ ¼ã‚‚ã¨ã¦ã‚‚ç©ã‚„ã‹ã§å¤§æº€è¶³ã§ã™ã€‚å¥åº·è¨ºæ–­æ›¸ã‚„éºä¼å­æ¤œæŸ»çµæœã‚‚ã—ã£ã‹ã‚Šã„ãŸã ã‘ã¾ã—ãŸã€‚' },
];

// ============================================================
// DATA MANAGEMENT
// ============================================================
const STORAGE_KEY = 'fuluck-admin-data';
const PASS_KEY = 'fuluck-admin-pass';
const LOG_KEY = 'fuluck-admin-log';
const DEFAULT_PASS = 'fuluck2025';

function loadData() {
  try {
    const raw = localStorage.getItem(STORAGE_KEY);
    if (raw) return JSON.parse(raw);
  } catch(e) {}
  return null;
}

function saveData(data) {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
}

function getData() {
  let data = loadData();
  if (!data) {
    data = { kittens: JSON.parse(JSON.stringify(DEFAULT_KITTENS)), parents: JSON.parse(JSON.stringify(DEFAULT_PARENTS)), reviews: JSON.parse(JSON.stringify(DEFAULT_REVIEWS)) };
    saveData(data);
  }
  return data;
}

function addLog(msg) {
  try {
    let logs = JSON.parse(localStorage.getItem(LOG_KEY) || '[]');
    logs.unshift({ time: new Date().toLocaleString('ja-JP'), msg });
    if (logs.length > 30) logs.length = 30;
    localStorage.setItem(LOG_KEY, JSON.stringify(logs));
  } catch(e) {}
}

let data = getData();

// ============================================================
// LOGIN
// ============================================================
function getPass() { return localStorage.getItem(PASS_KEY) || DEFAULT_PASS; }

document.getElementById('loginBtn').addEventListener('click', doLogin);
document.getElementById('loginPassword').addEventListener('keydown', e => { if (e.key === 'Enter') doLogin(); });

function doLogin() {
  if (document.getElementById('loginPassword').value === getPass()) {
    document.getElementById('loginScreen').style.display = 'none';
    document.getElementById('adminLayout').classList.add('active');
    sessionStorage.setItem('fuluck-admin-auth', '1');
    renderAll();
  } else {
    document.getElementById('loginError').style.display = 'block';
    document.getElementById('loginPassword').style.borderColor = '#FC8181';
  }
}

if (sessionStorage.getItem('fuluck-admin-auth') === '1') {
  document.getElementById('loginScreen').style.display = 'none';
  document.getElementById('adminLayout').classList.add('active');
  renderAll();
}

document.getElementById('logoutBtn').addEventListener('click', () => {
  sessionStorage.removeItem('fuluck-admin-auth');
  location.reload();
});

// ============================================================
// NAVIGATION
// ============================================================
const pageTitles = {
  dashboard:'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰', kittens:'å­çŒ«ç®¡ç†', parents:'è¦ªçŒ«ç®¡ç†',
  reviews:'ãŠå®¢æ§˜ã®å£°', export:'HTMLå‡ºåŠ›', data:'ãƒ‡ãƒ¼ã‚¿ç®¡ç†',
  guide:'æ“ä½œã‚¬ã‚¤ãƒ‰', settings:'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´'
};

document.querySelectorAll('.nav-item').forEach(item => {
  item.addEventListener('click', () => {
    const page = item.dataset.page;
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    item.classList.add('active');
    document.querySelectorAll('.panel-page').forEach(p => p.classList.remove('active'));
    document.getElementById('page-' + page).classList.add('active');
    document.getElementById('pageTitle').textContent = pageTitles[page] || '';
    document.getElementById('addNewBtn').style.display = ['kittens','parents','reviews'].includes(page) ? 'inline-flex' : 'none';
  });
});

document.getElementById('addNewBtn').addEventListener('click', () => {
  const active = document.querySelector('.nav-item.active')?.dataset.page;
  if (active === 'kittens') openKittenForm();
  else if (active === 'parents') openParentForm();
  else if (active === 'reviews') openReviewForm();
});

// ============================================================
// MODAL HELPERS
// ============================================================
function openModal(id) { document.getElementById(id).classList.add('active'); }
function closeModal(id) { document.getElementById(id).classList.remove('active'); }

function showToast(msg, type) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.className = 'toast ' + (type||'') + ' show';
  setTimeout(() => t.classList.remove('show'), 3000);
}

// ============================================================
// RENDER ALL
// ============================================================
function renderAll() {
  data = getData();
  renderDashboard();
  renderKittens();
  renderParents();
  renderReviews();
}

// ============================================================
// DASHBOARD
// ============================================================
function renderDashboard() {
  const k = data.kittens;
  const avail = k.filter(x => x.status === 'available').length;
  const reserved = k.filter(x => x.status === 'reserved').length;
  const sold = k.filter(x => x.status === 'sold').length;
  document.getElementById('statKittens').textContent = k.length;
  document.getElementById('statParents').textContent = data.parents.length;
  document.getElementById('statReviews').textContent = data.reviews.length;
  document.getElementById('statAvailable').textContent = avail;

  document.getElementById('dashboardSummary').innerHTML =
    '<div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px;">' +
    '<div style="text-align:center;padding:20px;background:#C6F6D5;border-radius:8px;"><div style="font-size:24px;font-weight:700;color:#22543D;">' + avail + '</div><div style="font-size:12px;color:#22543D;">è²©å£²ä¸­</div></div>' +
    '<div style="text-align:center;padding:20px;background:#FEFCBF;border-radius:8px;"><div style="font-size:24px;font-weight:700;color:#744210;">' + reserved + '</div><div style="font-size:12px;color:#744210;">å•†è«‡ä¸­</div></div>' +
    '<div style="text-align:center;padding:20px;background:#FED7E2;border-radius:8px;"><div style="font-size:24px;font-weight:700;color:#702459;">' + sold + '</div><div style="font-size:12px;color:#702459;">ã”å®¶æ—æ±ºå®š</div></div>' +
    '</div>';

  try {
    const logs = JSON.parse(localStorage.getItem(LOG_KEY) || '[]');
    document.getElementById('changeLog').innerHTML = logs.length ? logs.slice(0, 10).map(l =>
      '<div style="padding:8px 0;border-bottom:1px solid var(--border);font-size:13px;"><span style="color:var(--text-light);margin-right:12px;">' + l.time + '</span>' + l.msg + '</div>'
    ).join('') : '<p style="color:var(--text-light);font-size:13px">ã¾ã å¤‰æ›´å±¥æ­´ã¯ã‚ã‚Šã¾ã›ã‚“</p>';
  } catch(e) {}
}

// ============================================================
// KITTENS
// ============================================================
function renderKittens(filter) {
  filter = filter || document.getElementById('kittenFilterStatus').value;
  const tbody = document.getElementById('kittensTableBody');
  const items = filter === 'all' ? data.kittens : data.kittens.filter(k => k.status === filter);
  tbody.innerHTML = items.map(k => {
    const statusClass = k.status === 'available' ? 'badge-available' : k.status === 'reserved' ? 'badge-reserved' : 'badge-sold';
    const statusText = k.status === 'available' ? 'è²©å£²ä¸­' : k.status === 'reserved' ? 'å•†è«‡ä¸­' : 'ã”å®¶æ—æ±ºå®š';
    const genderDisplay = k.gender === 'â™‚' ? 'â™‚ ç”·ã®å­' : 'â™€ å¥³ã®å­';
    const birthdayDisplay = k.birthday ? k.birthday.replace('-', 'å¹´') + 'æœˆ' : '--';
    return '<tr>' +
      '<td class="thumb-cell">' + (k.coverPhoto ? '<img src="' + k.coverPhoto + '" class="thumb-img" onclick="openPhotoModal(\'kitten\',\'' + k.id + '\')" title="ã‚¯ãƒªãƒƒã‚¯ã§å¤‰æ›´">' : '<div class="thumb-placeholder" onclick="openPhotoModal(\'kitten\',\'' + k.id + '\')" style="cursor:pointer;" title="ã‚¯ãƒªãƒƒã‚¯ã§å†™çœŸè¨­å®š">ğŸ±</div>') + '</td>' +
      '<td>' + (k.breederId ? '<a href="https://www.koneko-breeder.com/kitten/?kid=' + k.breederId + '" target="_blank" class="breeder-link">' + k.breederId + '</a>' : '--') + '</td>' +
      '<td>' + k.breed + '</td>' +
      '<td>' + genderDisplay + '</td>' +
      '<td style="max-width:150px;">' + k.color + '</td>' +
      '<td>' + birthdayDisplay + '</td>' +
      '<td>Â¥' + (k.price||0).toLocaleString() + '</td>' +
      '<td><span class="status-badge ' + statusClass + '">' + statusText + '</span>' + (k.isNew ? ' <span style="background:var(--mint);color:white;font-size:10px;padding:1px 6px;border-radius:4px;">NEW</span>' : '') + '</td>' +
      '<td style="font-size:12px;white-space:nowrap;">' + (k.papa||'--') + ' / ' + (k.mama||'--') + '</td>' +
      '<td><div class="action-btns">' +
        '<button class="action-btn photo" onclick="openPhotoModal(\'kitten\',\'' + k.id + '\')">å†™çœŸ</button>' +
        '<button class="action-btn edit" onclick="editKitten(\'' + k.id + '\')">ç·¨é›†</button>' +
        '<button class="action-btn delete" onclick="deleteKitten(\'' + k.id + '\')">å‰Šé™¤</button>' +
      '</div></td>' +
    '</tr>';
  }).join('');
}

document.getElementById('kittenFilterStatus').addEventListener('change', function() { renderKittens(this.value); });

function openKittenForm(kitten) {
  document.getElementById('kittenEditId').value = kitten ? kitten.id : '';
  document.getElementById('kittenFormTitle').textContent = kitten ? 'å­çŒ«ã®ç·¨é›†' : 'å­çŒ«ã®è¿½åŠ ';
  document.getElementById('kf_breederId').value = kitten ? kitten.breederId : '';
  document.getElementById('kf_breed').value = kitten ? kitten.breed : 'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³';
  document.getElementById('kf_gender').value = kitten ? kitten.gender : 'â™‚';
  document.getElementById('kf_color').value = kitten ? kitten.color : '';
  document.getElementById('kf_birthday').value = kitten ? kitten.birthday : '';
  document.getElementById('kf_price').value = kitten ? kitten.price : '';
  document.getElementById('kf_status').value = kitten ? kitten.status : 'available';
  document.getElementById('kf_isNew').value = kitten ? String(kitten.isNew) : 'true';
  document.getElementById('kf_coverPhoto').value = kitten ? kitten.coverPhoto : '';
  document.getElementById('kf_note').value = kitten ? (kitten.note||'') : '';

  // Populate papa/mama dropdowns
  const papas = data.parents.filter(p => p.gender === 'â™‚');
  const mamas = data.parents.filter(p => p.gender === 'â™€');
  const papaSelect = document.getElementById('kf_papa');
  const mamaSelect = document.getElementById('kf_mama');
  papaSelect.innerHTML = '<option value="">-- é¸æŠ --</option>' + papas.map(p => '<option value="' + p.name + '"' + (kitten && kitten.papa === p.name ? ' selected' : '') + '>' + p.name + '</option>').join('');
  mamaSelect.innerHTML = '<option value="">-- é¸æŠ --</option>' + mamas.map(p => '<option value="' + p.name + '"' + (kitten && kitten.mama === p.name ? ' selected' : '') + '>' + p.name + '</option>').join('');

  openModal('kittenFormModal');
}

function editKitten(id) {
  const kitten = data.kittens.find(k => k.id === id);
  if (kitten) openKittenForm(kitten);
}

function saveKitten() {
  const editId = document.getElementById('kittenEditId').value;
  const obj = {
    breederId: document.getElementById('kf_breederId').value.trim(),
    breed: document.getElementById('kf_breed').value,
    gender: document.getElementById('kf_gender').value,
    color: document.getElementById('kf_color').value.trim(),
    birthday: document.getElementById('kf_birthday').value,
    price: parseInt(document.getElementById('kf_price').value) || 0,
    status: document.getElementById('kf_status').value,
    isNew: document.getElementById('kf_isNew').value === 'true',
    papa: document.getElementById('kf_papa').value,
    mama: document.getElementById('kf_mama').value,
    coverPhoto: document.getElementById('kf_coverPhoto').value.trim(),
    note: document.getElementById('kf_note').value.trim(),
  };

  if (!obj.breederId && !obj.color) { showToast('ãƒ–ãƒªãƒ¼ãƒ€ãƒ¼IDã¾ãŸã¯ã‚«ãƒ©ãƒ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error'); return; }

  if (editId) {
    const idx = data.kittens.findIndex(k => k.id === editId);
    if (idx >= 0) { Object.assign(data.kittens[idx], obj); addLog('å­çŒ« ' + obj.breederId + ' ã‚’ç·¨é›†ã—ã¾ã—ãŸ'); }
  } else {
    obj.id = 'k' + Date.now();
    obj.group = obj.breederId.startsWith('24') || obj.breederId.startsWith('25') ? '' : '';
    data.kittens.push(obj);
    addLog('å­çŒ« ' + obj.breederId + ' ã‚’è¿½åŠ ã—ã¾ã—ãŸ');
  }
  saveData(data);
  closeModal('kittenFormModal');
  renderAll();
  showToast('ä¿å­˜ã—ã¾ã—ãŸ', 'success');
}

function deleteKitten(id) {
  const k = data.kittens.find(x => x.id === id);
  if (!k) return;
  if (!confirm('å­çŒ« ' + k.breederId + ' ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return;
  data.kittens = data.kittens.filter(x => x.id !== id);
  saveData(data);
  addLog('å­çŒ« ' + k.breederId + ' ã‚’å‰Šé™¤ã—ã¾ã—ãŸ');
  renderAll();
  showToast('å‰Šé™¤ã—ã¾ã—ãŸ', 'success');
}

// ============================================================
// PARENTS
// ============================================================
function renderParents(filter) {
  filter = filter || document.getElementById('parentFilterBreed').value;
  const tbody = document.getElementById('parentsTableBody');
  let items = data.parents;
  if (filter === 'siberian') items = items.filter(p => p.breed === 'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³');
  else if (filter === 'british') items = items.filter(p => p.breed.includes('ãƒ–ãƒªãƒ†ã‚£ãƒƒã‚·ãƒ¥'));
  else if (filter === 'ragdoll') items = items.filter(p => p.breed === 'ãƒ©ã‚°ãƒ‰ãƒ¼ãƒ«');

  tbody.innerHTML = items.map(p => {
    const roleClass = p.role === 'ãƒ‘ãƒ‘çŒ«' ? 'badge-available' : 'badge-reserved';
    return '<tr>' +
      '<td class="thumb-cell">' + (p.coverPhoto ? '<img src="' + p.coverPhoto + '" class="thumb-img" onclick="openPhotoModal(\'parent\',\'' + p.id + '\')" title="ã‚¯ãƒªãƒƒã‚¯ã§å¤‰æ›´">' : '<div class="thumb-placeholder" onclick="openPhotoModal(\'parent\',\'' + p.id + '\')" style="cursor:pointer;">ğŸˆ</div>') + '</td>' +
      '<td><strong>' + p.name + '</strong></td>' +
      '<td>' + p.breed + '</td>' +
      '<td>' + p.gender + '</td>' +
      '<td>' + p.color + '</td>' +
      '<td>' + p.age + '</td>' +
      '<td><span class="status-badge ' + roleClass + '">' + p.role + '</span></td>' +
      '<td>' + (p.tested ? '<span style="color:var(--success);font-weight:600;">âœ“ æ¤œæŸ»æ¸ˆ</span>' : '<span style="color:var(--text-light);">æœªæ¤œæŸ»</span>') + '</td>' +
      '<td><div class="action-btns">' +
        '<button class="action-btn photo" onclick="openPhotoModal(\'parent\',\'' + p.id + '\')">å†™çœŸ</button>' +
        '<button class="action-btn edit" onclick="editParent(\'' + p.id + '\')">ç·¨é›†</button>' +
        '<button class="action-btn delete" onclick="deleteParent(\'' + p.id + '\')">å‰Šé™¤</button>' +
      '</div></td>' +
    '</tr>';
  }).join('');
}

document.getElementById('parentFilterBreed').addEventListener('change', function() { renderParents(this.value); });

function openParentForm(parent) {
  document.getElementById('parentEditId').value = parent ? parent.id : '';
  document.getElementById('parentFormTitle').textContent = parent ? 'è¦ªçŒ«ã®ç·¨é›†' : 'è¦ªçŒ«ã®è¿½åŠ ';
  document.getElementById('pf_name').value = parent ? parent.name : '';
  document.getElementById('pf_breed').value = parent ? parent.breed : 'ã‚µã‚¤ãƒ™ãƒªã‚¢ãƒ³';
  document.getElementById('pf_gender').value = parent ? parent.gender : 'â™‚';
  document.getElementById('pf_color').value = parent ? parent.color : '';
  document.getElementById('pf_age').value = parent ? parent.age : '';
  document.getElementById('pf_role').value = parent ? parent.role : 'ãƒ‘ãƒ‘çŒ«';
  document.getElementById('pf_tested').value = parent ? String(parent.tested) : 'true';
  document.getElementById('pf_coverPhoto').value = parent ? parent.coverPhoto : '';
  document.getElementById('pf_group').value = parent ? parent.group : 'c995680';
  openModal('parentFormModal');
}

function editParent(id) {
  const parent = data.parents.find(p => p.id === id);
  if (parent) openParentForm(parent);
}

function saveParent() {
  const editId = document.getElementById('parentEditId').value;
  const obj = {
    name: document.getElementById('pf_name').value.trim(),
    breed: document.getElementById('pf_breed').value,
    gender: document.getElementById('pf_gender').value,
    color: document.getElementById('pf_color').value.trim(),
    age: document.getElementById('pf_age').value.trim(),
    role: document.getElementById('pf_role').value,
    tested: document.getElementById('pf_tested').value === 'true',
    coverPhoto: document.getElementById('pf_coverPhoto').value.trim(),
    group: document.getElementById('pf_group').value,
  };
  if (!obj.name) { showToast('åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error'); return; }

  if (editId) {
    const idx = data.parents.findIndex(p => p.id === editId);
    if (idx >= 0) { Object.assign(data.parents[idx], obj); addLog('è¦ªçŒ« ' + obj.name + ' ã‚’ç·¨é›†ã—ã¾ã—ãŸ'); }
  } else {
    obj.id = 'p' + Date.now();
    data.parents.push(obj);
    addLog('è¦ªçŒ« ' + obj.name + ' ã‚’è¿½åŠ ã—ã¾ã—ãŸ');
  }
  saveData(data);
  closeModal('parentFormModal');
  renderAll();
  showToast('ä¿å­˜ã—ã¾ã—ãŸ', 'success');
}

function deleteParent(id) {
  const p = data.parents.find(x => x.id === id);
  if (!p) return;
  if (!confirm('è¦ªçŒ« ' + p.name + ' ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return;
  data.parents = data.parents.filter(x => x.id !== id);
  saveData(data);
  addLog('è¦ªçŒ« ' + p.name + ' ã‚’å‰Šé™¤ã—ã¾ã—ãŸ');
  renderAll();
  showToast('å‰Šé™¤ã—ã¾ã—ãŸ', 'success');
}

// ============================================================
// REVIEWS
// ============================================================
function renderReviews() {
  const tbody = document.getElementById('reviewsTableBody');
  tbody.innerHTML = data.reviews.map(r => {
    const excerpt = r.body.length > 50 ? r.body.substring(0, 50) + '...' : r.body;
    return '<tr>' +
      '<td><strong>' + r.author + '</strong></td>' +
      '<td>' + r.region + '</td>' +
      '<td>' + r.date + '</td>' +
      '<td style="max-width:300px;">' + excerpt + '</td>' +
      '<td><div class="action-btns">' +
        '<button class="action-btn edit" onclick="editReview(\'' + r.id + '\')">ç·¨é›†</button>' +
        '<button class="action-btn delete" onclick="deleteReview(\'' + r.id + '\')">å‰Šé™¤</button>' +
      '</div></td>' +
    '</tr>';
  }).join('');
}

function openReviewForm(review) {
  document.getElementById('reviewEditId').value = review ? review.id : '';
  document.getElementById('reviewFormTitle').textContent = review ? 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ç·¨é›†' : 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®è¿½åŠ ';
  document.getElementById('rf_author').value = review ? review.author : '';
  document.getElementById('rf_region').value = review ? review.region : '';
  document.getElementById('rf_date').value = review ? review.date : '';
  document.getElementById('rf_body').value = review ? review.body : '';
  openModal('reviewFormModal');
}

function editReview(id) {
  const review = data.reviews.find(r => r.id === id);
  if (review) openReviewForm(review);
}

function saveReview() {
  const editId = document.getElementById('reviewEditId').value;
  const obj = {
    author: document.getElementById('rf_author').value.trim(),
    region: document.getElementById('rf_region').value.trim(),
    date: document.getElementById('rf_date').value.trim(),
    body: document.getElementById('rf_body').value.trim(),
  };
  if (!obj.author || !obj.body) { showToast('ãŠåå‰ã¨æœ¬æ–‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error'); return; }

  if (editId) {
    const idx = data.reviews.findIndex(r => r.id === editId);
    if (idx >= 0) { Object.assign(data.reviews[idx], obj); addLog('ãƒ¬ãƒ“ãƒ¥ãƒ¼ ' + obj.author + ' ã‚’ç·¨é›†ã—ã¾ã—ãŸ'); }
  } else {
    obj.id = 'r' + Date.now();
    data.reviews.push(obj);
    addLog('ãƒ¬ãƒ“ãƒ¥ãƒ¼ ' + obj.author + ' ã‚’è¿½åŠ ã—ã¾ã—ãŸ');
  }
  saveData(data);
  closeModal('reviewFormModal');
  renderAll();
  showToast('ä¿å­˜ã—ã¾ã—ãŸ', 'success');
}

function deleteReview(id) {
  const r = data.reviews.find(x => x.id === id);
  if (!r) return;
  if (!confirm('ãƒ¬ãƒ“ãƒ¥ãƒ¼ ' + r.author + ' ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return;
  data.reviews = data.reviews.filter(x => x.id !== id);
  saveData(data);
  addLog('ãƒ¬ãƒ“ãƒ¥ãƒ¼ ' + r.author + ' ã‚’å‰Šé™¤ã—ã¾ã—ãŸ');
  renderAll();
  showToast('å‰Šé™¤ã—ã¾ã—ãŸ', 'success');
}

// ============================================================
// PHOTO MODAL
// ============================================================
function openPhotoModal(type, id) {
  document.getElementById('photo_type').value = type;
  document.getElementById('photo_id').value = id;
  document.getElementById('photo_url').value = '';
  document.getElementById('photoUploadPreview').style.display = 'none';

  let current = '';
  if (type === 'kitten') {
    const k = data.kittens.find(x => x.id === id);
    if (k) current = k.coverPhoto;
  } else {
    const p = data.parents.find(x => x.id === id);
    if (p) current = p.coverPhoto;
  }

  if (current) {
    document.getElementById('photoCurrentImg').src = current;
    document.getElementById('photoCurrentPreview').style.display = 'block';
    document.getElementById('photo_url').value = current;
  } else {
    document.getElementById('photoCurrentPreview').style.display = 'none';
  }

  openModal('photoModal');
}

document.getElementById('photoFileInput').addEventListener('change', function(e) {
  if (!e.target.files.length) return;
  const file = e.target.files[0];
  const reader = new FileReader();
  reader.onload = function(ev) {
    document.getElementById('photo_url').value = ev.target.result;
    document.getElementById('photoUploadImg').src = ev.target.result;
    document.getElementById('photoUploadPreview').style.display = 'block';
  };
  reader.readAsDataURL(file);
});

function savePhoto() {
  const type = document.getElementById('photo_type').value;
  const id = document.getElementById('photo_id').value;
  const url = document.getElementById('photo_url').value.trim();
  if (!url) { showToast('ç”»åƒURLã¾ãŸã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¦ãã ã•ã„', 'error'); return; }

  if (type === 'kitten') {
    const k = data.kittens.find(x => x.id === id);
    if (k) { k.coverPhoto = url; addLog('å­çŒ« ' + k.breederId + ' ã®å†™çœŸã‚’å¤‰æ›´ã—ã¾ã—ãŸ'); }
  } else {
    const p = data.parents.find(x => x.id === id);
    if (p) { p.coverPhoto = url; addLog('è¦ªçŒ« ' + p.name + ' ã®å†™çœŸã‚’å¤‰æ›´ã—ã¾ã—ãŸ'); }
  }

  saveData(data);
  closeModal('photoModal');
  renderAll();
  showToast('å†™çœŸã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');
}

// ============================================================
// HTML CODE GENERATION
// ============================================================
function generateKittensHTML() {
  const kittens = data.kittens.filter(k => k.group === 'c995680' && ['available','reserved'].includes(k.status));
  let html = '<!-- Generated by Admin Panel - Index Kittens Section -->\n';
  kittens.forEach(k => {
    const statusClass = k.status === 'available' ? 'st-available' : 'st-reserved';
    const statusText = k.status === 'available' ? 'è²©å£²ä¸­' : 'å•†è«‡ä¸­';
    const genderFull = k.gender === 'â™‚' ? 'â™‚ ç”·ã®å­' : 'â™€ å¥³ã®å­';
    const bMonth = k.birthday ? k.birthday.replace('-', 'å¹´') + 'æœˆç”Ÿã¾ã‚Œ' : '';
    html += `
        <div class="kitten-card" data-status="${k.status}" data-price="${k.price}" data-birthday="${k.birthday}-01" data-images="" data-video="" data-papa="${k.papa||''}" data-mama="${k.mama||''}" data-new="${k.isNew}" data-name="" data-breeder-id="${k.breederId}">
          <div class="kitten-img">
            <img src="${k.coverPhoto}" alt="å­çŒ«ã®å†™çœŸ" loading="lazy" style="width:100%;height:100%;object-fit:cover;">
            <span class="kit-status ${statusClass}" data-i18n="kittens.${k.status}">${statusText}</span>${k.isNew ? '\n            <span class="kit-badge-new">NEW</span>' : ''}
          </div>
          <div class="kitten-body">
            <h3>${k.breed}</h3>
            <p class="kit-meta">${genderFull} ãƒ» ${k.color}</p>
            <p class="kit-meta">${bMonth}</p>${k.note ? '\n            <p class="kit-meta" style="font-size:11px;color:var(--text-note);">' + k.note + '</p>' : ''}
            <p class="kit-price">Â¥${k.price.toLocaleString()} <span class="tax">ï¼ˆç¨è¾¼ï¼‰</span></p>
          </div>
        </div>\n`;
  });

  document.getElementById('generatedCode').textContent = html;
  document.getElementById('generatedCodeTitle').textContent = 'å­çŒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ HTMLï¼ˆindex.htmlç”¨ï¼‰';
  document.getElementById('generatedCodeArea').style.display = 'block';
  showToast('HTMLã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã—ãŸ', 'success');
}

function generateParentsHTML() {
  let html = '<!-- Generated by Admin Panel - Parents Section -->\n';
  data.parents.forEach(p => {
    const roleClass = p.role === 'ãƒ‘ãƒ‘çŒ«' ? 'role-papa' : 'role-mama';
    html += `
        <div class="parent-card" onclick="openParentModal(this)" data-name="${p.name}" data-breed="${p.breed}" data-gender="${p.gender}" data-role="${p.role}" data-age="${p.age}" data-color="${p.color}" data-tested="${p.tested}" style="position:relative;">
          <span class="health-tag tag-good" style="position:absolute;top:8px;right:8px;font-size:11px;padding:2px 8px;">âœ“ éºä¼å­æ¤œæŸ»æ¸ˆ</span>
          <img src="${p.coverPhoto}" alt="${p.name}" loading="lazy" style="width:100%;height:100%;object-fit:cover;border-radius:var(--radius-lg) var(--radius-lg) 0 0;">
          <div class="parent-body">
            <h3>${p.name}</h3>
            <p>${p.breed} ãƒ» ${p.gender} ãƒ» ${p.color}</p>
            <p style="font-size:12px;color:var(--text-note);">${p.age}</p>
            <span class="parent-role ${roleClass}">${p.role}</span>
          </div>
        </div>\n`;
  });

  document.getElementById('generatedCode').textContent = html;
  document.getElementById('generatedCodeTitle').textContent = 'è¦ªçŒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ HTMLï¼ˆparents.htmlç”¨ï¼‰';
  document.getElementById('generatedCodeArea').style.display = 'block';
  showToast('HTMLã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã—ãŸ', 'success');
}

function generateReviewsHTML() {
  let html = '<!-- Generated by Admin Panel - Reviews Section -->\n';
  data.reviews.forEach(r => {
    html += `
        <div class="review-card">
          <div class="review-header">
            <div class="review-stars">â˜…â˜…â˜…â˜…â˜…</div>
            <span class="review-platform">ã¿ã‚“ãªã®å­çŒ«ãƒ–ãƒªãƒ¼ãƒ€ãƒ¼</span>
          </div>
          <p class="review-body">${r.body}</p>
          <div class="review-footer">
            <p class="review-author">â€” ${r.region} ${r.author}ï¼ˆ${r.date}ï¼‰</p>
            <span class="review-verified">âœ“ èªè¨¼æ¸ˆã¿ãƒ¬ãƒ“ãƒ¥ãƒ¼</span>
          </div>
        </div>\n`;
  });

  document.getElementById('generatedCode').textContent = html;
  document.getElementById('generatedCodeTitle').textContent = 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ HTMLï¼ˆreviews.htmlç”¨ï¼‰';
  document.getElementById('generatedCodeArea').style.display = 'block';
  showToast('HTMLã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã—ãŸ', 'success');
}

function copyGeneratedCode() {
  const code = document.getElementById('generatedCode').textContent;
  navigator.clipboard.writeText(code).then(() => {
    showToast('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ', 'success');
  }).catch(() => {
    // Fallback
    const ta = document.createElement('textarea');
    ta.value = code;
    document.body.appendChild(ta);
    ta.select();
    document.execCommand('copy');
    document.body.removeChild(ta);
    showToast('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ', 'success');
  });
}

// ============================================================
// DATA MANAGEMENT
// ============================================================
function exportJSON() {
  const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'fuluck-admin-data-' + new Date().toISOString().slice(0,10) + '.json';
  a.click();
  URL.revokeObjectURL(url);
  addLog('ãƒ‡ãƒ¼ã‚¿ã‚’JSONã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ');
  showToast('ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ', 'success');
}

document.getElementById('importFileInput').addEventListener('change', function(e) {
  if (!e.target.files.length) return;
  const reader = new FileReader();
  reader.onload = function(ev) {
    try {
      const imported = JSON.parse(ev.target.result);
      if (!imported.kittens || !imported.parents || !imported.reviews) {
        showToast('ç„¡åŠ¹ãªãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™', 'error');
        return;
      }
      if (!confirm('ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¸Šæ›¸ãã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) return;
      saveData(imported);
      data = imported;
      addLog('JSONãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ');
      renderAll();
      showToast('ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ', 'success');
    } catch(err) {
      showToast('ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');
    }
  };
  reader.readAsText(e.target.files[0]);
  e.target.value = '';
});

function resetData() {
  if (!confirm('ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’åˆæœŸçŠ¶æ…‹ã«æˆ»ã—ã¾ã™ã€‚\nï¼ˆã‚µã‚¤ãƒˆã®å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã«å¾©å…ƒã•ã‚Œã¾ã™ï¼‰\n\nã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) return;
  localStorage.removeItem(STORAGE_KEY);
  data = getData();
  addLog('ãƒ‡ãƒ¼ã‚¿ã‚’åˆæœŸçŠ¶æ…‹ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ');
  renderAll();
  showToast('ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ', 'success');
}

// ============================================================
// PASSWORD
// ============================================================
document.getElementById('changePasswordBtn').addEventListener('click', () => {
  const np = document.getElementById('newPassword').value;
  const cp = document.getElementById('confirmPassword').value;
  if (!np) { showToast('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error'); return; }
  if (np !== cp) { showToast('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸€è‡´ã—ã¾ã›ã‚“', 'error'); return; }
  localStorage.setItem(PASS_KEY, np);
  showToast('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¾ã—ãŸ', 'success');
  document.getElementById('newPassword').value = '';
  document.getElementById('confirmPassword').value = '';
  addLog('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¾ã—ãŸ');
});

// ============================================================
// Initial render (if already logged in)
// ============================================================
if (sessionStorage.getItem('fuluck-admin-auth') === '1') {
  renderAll();
}
</script>
</body>
</html>
